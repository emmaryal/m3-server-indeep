(this["webpackJsonpget-scripts"]=this["webpackJsonpget-scripts"]||[]).push([[0],{29:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var a,r=n(0),s=n(1),o=n.n(s),c=n(46),i=n.n(c),l=n(13),h=n(7),d=n(9),u=n(11),j=n(10),p=(n(29),n(12)),b=n(23),m=n(16),g=n.n(m),O=new(function(){function e(){Object(h.a)(this,e),this.auth=g.a.create({baseURL:"https://indeep.herokuapp.com",withCredentials:!0})}return Object(d.a)(e,[{key:"signup",value:function(e,t,n,a){return this.auth.post("/auth/signup",{email:e,name:t,password:n,profilePic:a}).then((function(e){return e.data}))}},{key:"login",value:function(e,t){return this.auth.post("/auth/login",{email:e,password:t}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.get("/auth/logout").then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),x=o.a.createContext(),f=x.Consumer,v=x.Provider,C=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isLoggedIn:!1,isLoading:!0,user:null},e.signup=function(t,n,a,r){O.signup(t,n,a,r).then((function(t){return e.setState({isLoggedIn:!0,user:t})})).catch((function(t){e.setState({isLoggedIn:!1,user:null})}))},e.login=function(t,n){O.login(t,n).then((function(t){return e.setState({isLoggedIn:!0,user:t})})).catch((function(t){e.setState({isLoggedIn:!1,user:null})}))},e.logout=function(){O.logout().then((function(){return e.setState({isLoggedIn:!1,user:null})})).catch((function(e){return console.log(e)}))},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;O.me().then((function(t){return e.setState({isLoggedIn:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedIn:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoggedIn,n=e.isLoading,a=e.user,s=this.signup,o=this.login,c=this.logout;return n?Object(r.jsx)("p",{children:"Loading"}):Object(r.jsx)(v,{value:{isLoggedIn:t,isLoading:n,user:a,signup:s,login:o,logout:c},children:this.props.children})}}]),n}(o.a.Component),y=function(e){return function(t){Object(u.a)(a,t);var n=Object(j.a)(a);function a(){return Object(h.a)(this,a),n.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var t=this;return Object(r.jsx)(f,{children:function(n){var a=n.isLoggedIn,s=n.isLoading,o=n.user,c=n.signup,i=n.login,l=n.logout;return Object(r.jsx)(e,Object(b.a)(Object(b.a)({},t.props),{},{isLoggedIn:a,isLoading:s,user:o,signup:c,login:i,logout:l}))}})}}]),a}(o.a.Component)},w=y(function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={profilePlaceholder:"https://image.flaticon.com/icons/png/512/64/64572.png"},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("nav",{className:"navbar",children:[this.props.isLoggedIn?Object(r.jsx)(l.b,{to:"/private",id:"home-btn",children:Object(r.jsx)("img",{className:"rotate",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSeUxokMH9aY_2qzJ6F6M-rBq7oL56zwA2uWw&usqp=CAU",alt:"record"})}):Object(r.jsx)(l.b,{to:"/",id:"home-btn",children:Object(r.jsx)("img",{className:"rotate",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSeUxokMH9aY_2qzJ6F6M-rBq7oL56zwA2uWw&usqp=CAU",alt:"record"})}),Object(r.jsx)("h1",{className:"indeepTitle",children:"Indeep Records"}),Object(r.jsx)("div",{className:"rightnav",children:this.props.isLoggedIn?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("p",{children:this.props.user.profilePic?Object(r.jsx)("img",{style:{margin:"20px"},src:this.props.user.profilePic,alt:"profile pic",width:"50",height:"60"}):Object(r.jsx)("img",{style:{margin:"20px"},src:this.state.profilePlaceholder,alt:"profile pic",width:"50",height:"60"})}),Object(r.jsx)("button",{onClick:this.props.logout,children:"Logout"})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(l.b,{to:"/login",children:Object(r.jsx)("button",{className:"navbar-button",children:"Login"})}),Object(r.jsx)("br",{}),Object(r.jsx)(l.b,{to:"/signup",children:Object(r.jsx)("button",{className:"navbar-button",children:"Sign Up"})})]})})]})}}]),n}(s.Component)),P=n(22),S=n(14),L=n(2),R=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={search:""},e.handleInput=function(t){var n=t.target,a=n.value,r=n.name;e.setState(Object(S.a)({},r,a)),e.props.filterRecords(a)},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(r.jsx)(L.a,{children:Object(r.jsx)(L.a.Group,{controlId:"formBasicSearch",children:Object(r.jsx)(L.a.Control,{type:"text",name:"search",value:this.state.search,placeholder:"Search",onChange:this.handleInput})})})}}]),n}(s.Component),k=n(20),I=(n(78),n(8)),F=n(25),N=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e.getCurrentUser=function(){O.me().then((function(t){var n=t.email;e.setState({currentUser:n})})).catch((function(e){return console.log(e)}))},e.getNewReleases=function(){var t=Object(P.a)(e.props.newReleases);console.log(e.props);var n=t.slice(Math.max(t.length-10,0));e.setState({newReleases:n})},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.getCurrentUser(),this.getNewReleases()}},{key:"render",value:function(){this.props.newReleases;return Object(r.jsx)("div",{children:this.state.newReleases?this.state.newReleases.map((function(e){return Object(r.jsxs)("div",{className:"chart-list",children:[Object(r.jsx)(l.b,{to:"/records/".concat(e._id),children:Object(r.jsx)("p",{className:"chart-text",children:e.title})}),Object(r.jsxs)("span",{children:["artist: ",e.artist," "]}),Object(r.jsx)("br",{}),Object(r.jsxs)("span",{children:["label:",e.label," "]}),Object(r.jsxs)("p",{children:["Price: ",e.price,"\u20ac"]})]},e._id)})):Object(r.jsx)("h1",{children:"loading"})})}}]),n}(s.Component),A=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={firstThreeArray:[1],lastNumber:"",showEllipis:!0},e.prev=function(){e.props.currentPage>1&&e.props.changeCurrentPage(e.props.currentPage-1)},e.next=function(){e.props.currentPage<e.props.totalPages&&e.props.changeCurrentPage(e.props.currentPage+1)},e.changeCurrentPage=function(t){e.props.changeCurrentPage(t)},e.showEllipsis=function(){if(e.state.showEllipis)return Object(r.jsx)("a",{children:Object(r.jsx)("li",{children:"..."})})},e.isactive=function(t){return e.props.currentPage==t},e.showLastPagi=function(){if(e.props.currentPage!==e.props.totalPages)return Object(r.jsx)("a",{className:e.isactive(e.props.totalPages)?"is-active":"",onClick:function(){e.changeCurrentPage(e.props.totalPages)},children:Object(r.jsx)("li",{children:e.props.totalPages})})},e.showPrev=function(){if(1!=e.props.currentPage)return Object(r.jsx)("a",{onClick:e.prev,children:Object(r.jsx)("li",{children:"<"})})},e.showNext=function(){if(e.props.currentPage<e.props.totalPages)return Object(r.jsx)("a",{onClick:e.next,children:Object(r.jsx)("li",{children:">"})})},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){if(this.props.totalPages<=5){for(var e=[],t=1;t<=this.props.totalPages;t++)e.push(t);this.setState({firstThreeArray:e})}else{if(this.props.currentPage<3)this.setState({firstThreeArray:[1,2,3]});else{e=[];for(var n=1,a=this.props.currentPage;a>=0&&(e.push(a),3!==n);a--)n++;e.reverse(),this.setState({firstThreeArray:e})}this.setState({lastNumber:this.props.totalPages})}}},{key:"componentWillReceiveProps",value:function(e){if(e.totalPages<=5){for(var t=[],n=1;n<=e.totalPages;n++)t.push(n);this.setState({firstThreeArray:t})}else if(this.props.currentPage!==e.currentPage||this.props.totalPages!==e.totalPages){if(e.currentPage<3)this.setState({firstThreeArray:[1,2,3]});else(t=[]).push(e.currentPage-1),t.push(e.currentPage),e.currentPage+1<e.totalPages&&t.push(e.currentPage+1),e.currentPage==e.totalPages-2||e.currentPage==e.totalPages-1||e.currentPage==e.totalPages?this.setState({showEllipis:!1}):this.setState({showEllipis:!0}),this.setState({firstThreeArray:t});this.setState({lastNumber:e.totalPages})}}},{key:"render",value:function(){var e=this;return Object(r.jsx)("div",{className:this.props.theme+" pagination",children:Object(r.jsxs)("ul",{children:[this.showPrev(),this.props.totalPages<=5?this.state.firstThreeArray.map((function(t,n){return Object(r.jsx)("a",{className:e.isactive(t)?"is-active":"",onClick:function(){e.changeCurrentPage(t)},children:Object(r.jsx)("li",{children:t})},n)})):Object(r.jsxs)(o.a.Fragment,{children:[this.state.firstThreeArray.map((function(t,n){return Object(r.jsx)("a",{className:e.isactive(t)?"is-active":"",onClick:function(){e.changeCurrentPage(t)},children:Object(r.jsx)("li",{children:t})},n)})),this.showEllipsis(),this.showLastPagi()]}),this.showNext()]})})}}]),n}(o.a.Component);A.defaultProps=(a={theme:"square-i"},Object(S.a)(a,"theme","default"),Object(S.a)(a,"currentPage",1),Object(S.a)(a,"totalPages",15),a);var U=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={listOfRecords:[],currentRecords:[],newReleases:[],currentPage:1,currentUser:null},e.changeCurrentPage=function(t){e.setState({currentPage:t})},e.getAllRecords=function(){g.a.get("".concat("https://indeep.herokuapp.com","/api/records/")).then((function(t){e.setState({listOfRecords:t.data})}))},e.getCurrentUser=function(){O.me().then((function(t){var n=t.email;e.setState({currentUser:n})})).catch((function(e){return console.log(e)}))},e.filterRecords=function(t){var n=e.state.listOfRecords.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())||e.artist.toLowerCase().includes(t.toLowerCase())||e.label.toLowerCase().includes(t.toLowerCase())}));e.setState({listOfRecords:n})},e.handleRandom=function(){var t=Math.floor(e.state.listOfRecords.length*Math.random()),n=e.state.listOfRecords[t];e.setState({listOfRecords:n}),console.log(t),console.log(n),e.filterRecords(n.title)},e.handleSortByTitle=function(){var t=Object(P.a)(e.state.listOfRecords);t.sort((function(e,t){var n=e.title.toLowerCase(),a=t.title.toLowerCase();return n<a?-1:n>a?1:0})),e.setState({listOfRecords:t})},e.handleSortByArtist=function(){var t=Object(P.a)(e.state.listOfRecords);t.sort((function(e,t){var n=e.artist.toLowerCase(),a=t.artist.toLowerCase();return n<a?-1:n>a?1:0})),e.setState({listOfRecords:t})},e.handleSortByLabel=function(){var t=Object(P.a)(e.state.listOfRecords);t.sort((function(e,t){var n=e.label.toLowerCase(),a=t.label.toLowerCase();return n<a?-1:n>a?1:0})),e.setState({listOfRecords:t})},e.handleSortByAscPrice=function(){var t=Object(P.a)(e.state.listOfRecords);t.sort((function(e,t){var n=e.price,a=t.price;return n<a?-1:n>a?1:0})),e.setState({listOfRecords:t})},e.handleSortByDesPrice=function(){var t=Object(P.a)(e.state.listOfRecords);t.sort((function(e,t){var n=e.price,a=t.price;return n<a?1:n>a?-1:0})),e.setState({listOfRecords:t})},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.getAllRecords(),this.getCurrentUser()}},{key:"render",value:function(){var e=this,t=this.state.listOfRecords;t.length;return Object(r.jsxs)("div",{children:[Object(r.jsx)(R,{filterRecords:this.filterRecords}),Object(r.jsx)(k.a,{className:"mb-2",variant:"outline secondary",onClick:this.getAllRecords,children:"Show All"}),Object(r.jsx)(k.a,{className:"mb-2",variant:"outline secondary",onClick:this.handleRandom,children:"Record of the Day"}),Object(r.jsx)(k.a,{className:"mb-2",variant:"outline secondary",onClick:this.handleSortByTitle,children:"Sort By Title"}),Object(r.jsx)(k.a,{className:"mb-2",variant:"outline secondary",onClick:this.handleSortByArtist,children:"Sort By Artist"}),Object(r.jsx)(k.a,{className:"mb-2",variant:"outline secondary",onClick:this.handleSortByLabel,children:"Sort By Label"}),Object(r.jsx)(k.a,{className:"mb-2",variant:"outline secondary",onClick:this.handleSortByAscPrice,children:"Sort By Price (ascending)"}),Object(r.jsx)(k.a,{className:"mb-2",variant:"outline secondary",onClick:this.handleSortByDesPrice,children:"Sort By Price (descending)"}),Object(r.jsx)(F.a,{children:Object(r.jsx)("div",{children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsxs)("p",{children:["current Page: ",Object(r.jsx)("strong",{children:this.state.currentPage})]}),Object(r.jsx)(A,{currentPage:this.state.currentPage,itemsCountPerPage:10,totalItemsCount:1910,changeCurrentPage:this.changeCurrentPage,theme:"circle"})]})})}),Object(r.jsxs)(F.a,{children:[Object(r.jsx)(I.a,{sm:10,children:Object(r.jsx)("div",{children:t.map((function(t){return Object(r.jsx)("div",{className:"card",children:Object(r.jsxs)(F.a,{children:[Object(r.jsxs)(I.a,{sm:8,children:[Object(r.jsx)(l.b,{to:"/records/".concat(t._id),children:Object(r.jsxs)("h5",{className:"indeepText",children:["Record Title : ",t.title]})}),Object(r.jsxs)("p",{children:["Artist : ",t.artist," "]}),Object(r.jsxs)("p",{children:["Label : ",t.label]}),Object(r.jsxs)("p",{children:["Price: ",t.price,"\u20ac"]})]}),Object(r.jsxs)(I.a,{sm:4,children:[Object(r.jsx)("img",{style:{width:"100px",padding:"10px"},src:"https://crossedcombs.typepad.com/.a/6a00e00980a6f38833017c37ab6210970b-pi",alt:"record"}),Object(r.jsx)("img",{style:{width:"100px",padding:"10px"},src:"https://crossedcombs.typepad.com/.a/6a00e00980a6f38833017c37ab6210970b-pi",alt:"record"}),"admin"===e.state.currentUser?Object(r.jsx)(l.b,{to:"/records/edit/".concat(t._id),children:Object(r.jsx)("p",{children:"Update or Delete this record"})}):null]})," "]})},t._id)}))})}),Object(r.jsxs)(I.a,{sm:2,children:[Object(r.jsx)("h3",{children:"new releases"}),this.state.listOfRecords[0]?Object(r.jsx)(N,{newReleases:this.state.listOfRecords}):null]})]})]})}}]),n}(s.Component);var B=function(){return Object(r.jsx)("div",{children:Object(r.jsx)(U,{})})},G=y(function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={email:"",name:"",password:"",profilePic:""},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,a=n.email,r=n.name,s=n.password,o=n.profilePic;e.props.signup(a,r,s,o)},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(S.a)({},a,r))},e.handleFileUpload=function(t){console.log("The file to be uploaded is: ",t.target.files);var n=t.target.files[0],a=new FormData;a.append("profilePic",n),g.a.post("".concat("https://indeep.herokuapp.com","/auth/upload"),a,{withCredentials:!0}).then((function(t){console.log("response is: ",t),e.setState({profilePic:t.data.secure_url})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.name,a=e.password,s=e.profilePic;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Sign Up"}),Object(r.jsxs)(L.a,{onSubmit:this.handleFormSubmit,children:[Object(r.jsxs)(L.a.Group,{controlId:"exampleForm.ControlInput1",children:[Object(r.jsx)("label",{children:"Email:"}),Object(r.jsx)(L.a.Control,{type:"text",name:"email",value:t,onChange:this.handleChange,id:"exampleInputEmail1",class:"form-control","aria-describedby":"emailHelp"}),Object(r.jsx)("label",{children:"Name:"}),Object(r.jsx)(L.a.Control,{type:"text",name:"name",value:n,onChange:this.handleChange,id:"exampleInputName1",class:"form-control","aria-describedby":"nameHelp"}),Object(r.jsx)("label",{children:"Password:"}),Object(r.jsx)(L.a.Control,{type:"password",name:"password",value:a,onChange:this.handleChange,id:"exampleInputPassword1",class:"form-control","aria-describedby":"passwordHelp"}),Object(r.jsx)("label",{children:"Profile Image"}),Object(r.jsx)(L.a.Control,{name:"profilePic",type:"file",onChange:this.handleFileUpload}),Object(r.jsx)("span",{children:Object(r.jsx)("img",{style:{width:"100px"},src:s&&s,alt:""})})]}),Object(r.jsx)("input",{variant:"secondary",type:"submit",value:"Signup"})]}),Object(r.jsx)("p",{children:"Already have account?"}),Object(r.jsx)(l.b,{to:"/login",children:" Login"})]})}}]),n}(s.Component)),T=y(function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,a=n.email,r=n.password;e.props.login(a,r)},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(S.a)({},a,r))},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Login"}),Object(r.jsxs)(L.a,{className:"forms-input",onSubmit:this.handleFormSubmit,children:[Object(r.jsxs)(L.a.Group,{controlId:"exampleForm.ControlInput1",children:[Object(r.jsx)("label",{children:"Email:"}),Object(r.jsx)(L.a.Control,{type:"text",name:"email",value:t,onChange:this.handleChange,id:"exampleInputEmail1",className:"form-control","aria-describedby":"emailHelp"}),Object(r.jsx)("label",{children:"Password:"}),Object(r.jsx)(L.a.Control,{type:"password",name:"password",value:n,id:"exampleInputPassword1",onChange:this.handleChange,className:"form-control","aria-describedby":"passwordHelp"})]}),Object(r.jsx)("input",{variant:"secondary",type:"submit",value:"Login"})]})]})}}]),n}(s.Component)),D=y(function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={currentUser:null},e.getCurrentUser=function(){O.me().then((function(t){var n=t.email;console.log("data from promise:",t),e.setState({currentUser:n}),console.log("this.state:",e.state)})).catch((function(e){return console.log(e)}))},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.getCurrentUser()}},{key:"render",value:function(){return Object(r.jsxs)("div",{children:["admin"===this.state.currentUser?Object(r.jsxs)(l.b,{to:"/records/add",children:[Object(r.jsx)("button",{className:"navbar-button",children:"Add Record"})," "]}):Object(r.jsxs)("div",{children:[Object(r.jsxs)("h4",{children:["Welcome ",this.props.user&&this.props.user.email]}),Object(r.jsx)("p",{children:" here we will have shopping cart stuff and links to faves"})]}),Object(r.jsx)("br",{}),Object(r.jsx)(U,{})]})}}]),n}(s.Component)),E=new function e(){var t=this;Object(h.a)(this,e),this.getAll=function(){return t.api.get("/records")},this.getOneUser=function(e){return t.api.get("/users/".concat(e)).then((function(e){return e.data}))},this.getOne=function(e){return t.api.get("/records/".concat(e)).then((function(e){return e.data}))},this.create=function(e){return t.api.post("/records",e)},this.updateFave=function(e,n){return t.api.put("/users/".concat(e,"/records/").concat(n))},this.removeFave=function(e,n){return t.api.put("/records/".concat(e,"/users/").concat(n))},this.deleteOne=function(e){return t.api.delete("/records/".concat(e))},this.api=g.a.create({baseURL:"https://indeep.herokuapp.com/api",withCredentials:!0})},M=n(24),_=n(33),q=n.n(_),W=n(48),H=n(34);function z(e){var t=o.a.useState(!1),n=Object(H.a)(t,2),a=n[0],s=n[1],c=o.a.useState(null),i=Object(H.a)(c,2),l=i[0],h=(i[1],o.a.useRef());return o.a.useEffect((function(){window.paypal.Buttons({createOrder:function(e,t){return t.order.create({intent:"CAPTURE",purchase_units:[{description:"Your description",currency_code:"EUR"}]})},onApprove:function(){var e=Object(W.a)(q.a.mark((function e(t,n){var a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.order.capture();case 2:a=e.sent,s(!0),console.log(a);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),onError:function(e){console.error(e)}}).render(h.current)}),[]),a?Object(r.jsx)("div",{children:"Payment successful.!"}):l?Object(r.jsx)("div",{children:"Error Occurred in processing payment.! Please try again."}):Object(r.jsxs)("div",{children:[Object(r.jsxs)("h6",{children:["Total Amount in EUR. : ",e.toPay," "]}),Object(r.jsx)("div",{ref:h})]})}var J=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={id:"",recordId:"",listingId:"",title:" ",artist:" ",format:"",image:"",label:"",mediaCondition:"",sleeveCondition:"",weight:"",catno:"",comments:"",price:0,defaultImg:"./../images/recordPlaceholderImage.jpeg",favoritedBy:[],count:0,currentUser:null,isFavourite:!1,checkout:!0,setCheckout:!0},e.getCurrentSessionUser=function(){O.me().then((function(t){var n=t._id;console.log("id of current session user",n),console.log("data from promise:",t),e.setState({currentUser:n}),console.log("this.state:",e.state),E.getOneUser(n).then((function(t){console.log("currentUser from DB: ",t);var n=t._id;e.setState({currentUser:n}),console.log("this.state.currentUser:",e.state.currentUser),console.log("userId:",n)})).catch((function(e){return console.log(e)}))}))},e.getSingleRecord=function(){var t=e.props.match.params.id;console.log("record id:",t),E.getOne(t).then((function(t){console.log("data from getsinglerecord",t);var n=t.id,a=t.listingId,r=t.title,s=t.artist,o=t.format,c=t.image,i=t.label,l=t.mediaCondition,h=t.sleeveCondition,d=t.weight,u=t.catno,j=t.comments,p=t.price,b=t.favoritedBy;e.setState({id:n,listingId:a,title:r,artist:s,format:o,image:c,label:i,mediaCondition:l,sleeveCondition:h,weight:d,catno:u,comments:j,price:p,favoritedBy:b})})).catch((function(e){return console.log(e)}))},e.addFavourite=function(){e.setState({isFavourite:!e.state.isFavourite});var t=e.state.currentUser,n=e.props.match.params.id,a=n;console.log("isFavourite:",e.state.isFavourite),console.log("record id:",n),console.log("userid:",t),!1===e.state.isFavourite?E.updateFave(t,a).then().catch((function(e){return console.log(e)})):E.removeFave(a,t).then().catch((function(e){return console.log(e)}))},e.setPopularity=function(e){},e.setCheckout=function(){},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.getSingleRecord(),this.getCurrentSessionUser()}},{key:"render",value:function(){var e=this;return Object(r.jsx)(M.a,{className:"card",children:Object(r.jsxs)(F.a,{children:[Object(r.jsxs)(I.a,{className:"details-labels",lg:6,children:[Object(r.jsx)("h3",{children:this.state.title}),Object(r.jsx)("h4",{children:this.state.artist}),Object(r.jsxs)("p",{className:"details-labels",children:["label: ",this.state.label]}),Object(r.jsxs)("p",{children:["format: ",this.state.format]}),Object(r.jsxs)("p",{children:["label: ",this.state.label]}),Object(r.jsxs)("p",{children:["media condition: ",this.state.mediaCondition]}),Object(r.jsxs)("p",{children:["sleeve condition: ",this.state.sleeveCondition]}),Object(r.jsxs)("p",{children:["weight: ",this.state.weight,"g"]}),Object(r.jsxs)("p",{children:["catalogue no.: ",this.state.catno]}),Object(r.jsxs)("p",{children:["comments: ",this.state.comments]}),Object(r.jsxs)("div",{children:["price: ",this.state.price,"\u20ac"]}),Object(r.jsx)("br",{}),Object(r.jsx)(l.b,{to:"/",children:"see all"})]}),Object(r.jsxs)(I.a,{md:3,children:[Object(r.jsx)("img",{style:{width:"200px"},src:"https://www.saga.co.uk/contentlibrary/saga/publishing/verticals/money/personal-finance/making-money/selling-vinyl-shutterstock-234267241.jpg",alt:"record"}),Object(r.jsx)("img",{style:{width:"200px"},src:"https://www.saga.co.uk/contentlibrary/saga/publishing/verticals/money/personal-finance/making-money/selling-vinyl-shutterstock-234267241.jpg",alt:"record"}),Object(r.jsx)("br",{}),this.state.isFavourite?Object(r.jsx)("button",{onClick:this.addFavourite,children:"Remove from favourites"}):Object(r.jsx)("button",{onClick:this.addFavourite,children:"Add to favourites"})]}),Object(r.jsx)(I.a,{sm:3,children:!0===this.state.checkout?Object(r.jsx)("div",{className:"payment-div",children:Object(r.jsx)(z,{toPay:this.state.price})}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"React-PayPal"}),Object(r.jsx)("button",{onClick:function(){e.setCheckout(!0)},className:"checkout-button",children:"Checkout"})]})})]})})}}]),n}(s.Component),Y=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).handleFormSubmit=function(e){e.preventDefault();var t=a.state,n=t.title,s=t.artist,o=t.format,c=t.image,i=t.label,l=t.mediaCondition,h=t.sleeveCondition,d=t.weight,u=t.comments,j=t.catno,b=t.price;return g.a.post("".concat("https://indeep.herokuapp.com","/api/records"),{title:n,artist:s,format:o,image:c,label:i,mediaCondition:l,sleeveCondition:h,weight:d,comments:u,catno:j,price:b},{withCredentials:!0}).then((function(){a.setState({title:"",artist:"",format:"",image:"",label:"",mediaCondition:"",sleeveCondition:"",weight:"",comments:"",catno:"",price:0}),a.props.history.push("/")})).catch((function(e){return console.log(e)})),Object(r.jsx)(p.a,{to:"/"})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(S.a)({},n,r))},a.state={title:"",artist:"",format:"",image:"",label:"",mediaCondition:"",sleeveCondition:"",weight:"",comments:"",catno:"",price:0},a}return Object(d.a)(n,[{key:"render",value:function(){return Object(r.jsx)(M.a,{className:"card",children:Object(r.jsxs)(L.a,{className:"forms-input",onSubmit:this.handleFormSubmit,children:[Object(r.jsxs)(L.a.Row,{children:[Object(r.jsxs)(L.a.Group,{as:I.a,controlId:"exampleForm.ControlTitle",children:[Object(r.jsx)(L.a.Label,{children:"Title:"}),Object(r.jsx)(L.a.Control,{type:"text",name:"title",value:this.state.title,onChange:this.handleChange})]}),Object(r.jsxs)(L.a.Group,{as:I.a,controlId:"exampleForm.ControlLabel",children:[Object(r.jsx)(L.a.Label,{children:"Artist:"}),Object(r.jsx)(L.a.Control,{type:"text",name:"artist",value:this.state.artist,onChange:this.handleChange})]})]}),Object(r.jsxs)(L.a.Row,{children:[Object(r.jsxs)(L.a.Group,{as:I.a,controlId:"exampleForm.ControlmediaCond",children:[Object(r.jsx)(L.a.Label,{children:"Media Condition:"}),Object(r.jsx)(L.a.Control,{type:"text",name:"mediaCondition",value:this.state.mediaCondition,onChange:this.handleChange})]}),Object(r.jsxs)(L.a.Group,{as:I.a,controlId:"exampleForm.ControlsleeveCond",children:[Object(r.jsx)(L.a.Label,{children:"Sleeve Condition:"}),Object(r.jsx)(L.a.Control,{type:"text",name:"sleeveCondition",value:this.state.sleeveCondition,onChange:this.handleChange})]})]}),Object(r.jsxs)(L.a.Row,{children:[Object(r.jsxs)(L.a.Group,{as:I.a,controlId:"exampleForm.ControlFormat",children:[Object(r.jsx)(L.a.Label,{children:"Format:"}),Object(r.jsx)(L.a.Control,{type:"text",name:"format",value:this.state.format,onChange:this.handleChange})]}),Object(r.jsxs)(L.a.Group,{as:I.a,controlId:"exampleForm.ControlWeight",children:[Object(r.jsx)(L.a.Label,{children:"Weight (grammes):"}),Object(r.jsx)(L.a.Control,{type:"text",name:"weight",value:this.state.weight,onChange:this.handleChange})]}),Object(r.jsxs)(L.a.Group,{as:I.a,controlId:"exampleForm.ControlCatNo",children:[Object(r.jsx)(L.a.Label,{children:"Catalogue Number:"}),Object(r.jsx)(L.a.Control,{type:"text",name:"catno",value:this.state.catno,onChange:this.handleChange})]})]}),Object(r.jsxs)(L.a.Row,{children:[Object(r.jsxs)(L.a.Group,{as:I.a,md:8,controlId:"exampleForm.ControlComments",children:[Object(r.jsx)(L.a.Label,{children:"Comments:"}),Object(r.jsx)(L.a.Control,{type:"textarea",name:"comments",value:this.state.comments,onChange:this.handleChange})]}),Object(r.jsxs)(L.a.Group,{as:I.a,md:4,controlId:"exampleForm.ControlPrice",children:[Object(r.jsx)(L.a.Label,{children:"Price (\u20ac):"}),Object(r.jsx)(L.a.Control,{id:"price-field",type:"text",name:"price",value:this.state.price,onChange:this.handleChange})]})]}),Object(r.jsx)("input",{variant:"secondary",type:"submit",value:"Add Record"})]})})}}]),n}(s.Component),K=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={title:"",artist:"",format:"",label:"",mediaCondition:"",sleeveCondition:"",weight:"",catno:"",comments:"",image:"",price:0},e.getSingleRecord=function(){var t=e.props.match.params.id;console.log("id:",t),E.getOne(t).then((function(t){console.log(t);var n=t.listingId,a=t.title,r=t.artist,s=t.format,o=t.image,c=t.label,i=t.mediaCondition,l=t.sleeveCondition,h=t.weight,d=t.catno,u=t.comments,j=t.price;e.setState({listingId:n,title:a,artist:r,format:s,image:o,label:c,mediaCondition:i,sleeveCondition:l,weight:h,catno:d,comments:u,price:j})})).catch((function(e){return console.log(e)}))},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,a=n.title,r=n.artist,s=n.format,o=n.label,c=n.mediaCondition,i=n.sleeveCondition,l=n.weight,h=n.catno,d=n.image,u=n.comments,j=n.price,p=e.props.match.params.id;g.a.put("".concat("https://indeep.herokuapp.com","/api/records/").concat(p),{title:a,artist:r,format:s,label:o,mediaCondition:c,sleeveCondition:i,weight:l,catno:h,image:d,comments:u,price:j}).then((function(){e.getSingleRecord(),e.props.history.push("/")})).catch((function(e){return console.log(e)}))},e.deleteRecord=function(){var t=e.props.match.params.id;g.a.delete("".concat("https://indeep.herokuapp.com","/api/records/").concat(t)).then((function(){return e.props.history.push("/")})).catch((function(e){return console.log(e)}))},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(S.a)({},a,r))},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.getSingleRecord()}},{key:"render",value:function(){return Object(r.jsx)(M.a,{className:"card",children:Object(r.jsxs)(L.a,{className:"forms-input",onSubmit:this.handleFormSubmit,children:[Object(r.jsxs)(L.a.Row,{children:[Object(r.jsxs)(L.a.Group,{as:I.a,controlId:"exampleForm.ControlTitle",children:[Object(r.jsx)(L.a.Label,{children:"Title:"}),Object(r.jsx)(L.a.Control,{type:"text",name:"title",value:this.state.title,onChange:this.handleChange})]}),Object(r.jsxs)(L.a.Group,{as:I.a,controlId:"exampleForm.ControlLabel",children:[Object(r.jsx)(L.a.Label,{children:"Artist:"}),Object(r.jsx)(L.a.Control,{type:"text",name:"artist",value:this.state.artist,onChange:this.handleChange})]})]}),Object(r.jsxs)(L.a.Row,{children:[Object(r.jsxs)(L.a.Group,{as:I.a,controlId:"exampleForm.ControlmediaCond",children:[Object(r.jsx)(L.a.Label,{children:"Media Condition:"}),Object(r.jsx)(L.a.Control,{type:"text",name:"mediaCondition",value:this.state.mediaCondition,onChange:this.handleChange})]}),Object(r.jsxs)(L.a.Group,{as:I.a,controlId:"exampleForm.ControlsleeveCond",children:[Object(r.jsx)(L.a.Label,{children:"Sleeve Condition:"}),Object(r.jsx)(L.a.Control,{type:"text",name:"sleeveCondition",value:this.state.sleeveCondition,onChange:this.handleChange})]})]}),Object(r.jsxs)(L.a.Row,{children:[Object(r.jsxs)(L.a.Group,{as:I.a,controlId:"exampleForm.ControlFormat",children:[Object(r.jsx)(L.a.Label,{children:"Format:"}),Object(r.jsx)(L.a.Control,{type:"text",name:"format",value:this.state.format,onChange:this.handleChange})]}),Object(r.jsxs)(L.a.Group,{as:I.a,controlId:"exampleForm.ControlWeight",children:[Object(r.jsx)(L.a.Label,{children:"Weight (grammes):"}),Object(r.jsx)(L.a.Control,{type:"text",name:"weight",value:this.state.weight,onChange:this.handleChange})]}),Object(r.jsxs)(L.a.Group,{as:I.a,controlId:"exampleForm.ControlCatNo",children:[Object(r.jsx)(L.a.Label,{children:"Catalogue Number:"}),Object(r.jsx)(L.a.Control,{type:"text",name:"catno",value:this.state.catno,onChange:this.handleChange})]})]}),Object(r.jsxs)(L.a.Row,{children:[Object(r.jsxs)(L.a.Group,{as:I.a,md:8,controlId:"exampleForm.ControlComments",children:[Object(r.jsx)(L.a.Label,{children:"Comments:"}),Object(r.jsx)(L.a.Control,{type:"textarea",name:"comments",value:this.state.comments,onChange:this.handleChange})]}),Object(r.jsxs)(L.a.Group,{as:I.a,md:4,controlId:"exampleForm.ControlPrice",children:[Object(r.jsx)(L.a.Label,{children:"Price (\u20ac):"}),Object(r.jsx)(L.a.Control,{id:"price-field",type:"text",name:"price",value:this.state.price,onChange:this.handleChange})]})]})," ",Object(r.jsx)("input",{variant:"secondary",type:"submit",value:"Update Record"}),Object(r.jsx)("br",{}),Object(r.jsx)(k.a,{variant:"secondary",onClick:this.deleteRecord,children:"Delete Record"})]})})}}]),n}(s.Component),Q=Object(p.g)(K);var V=y((function(e){var t=e.isLoggedIn,n=e.isLoading,a=e.component,s=e.exact,o=e.path;return n?"Loading":Object(r.jsx)(p.b,{exact:s,path:o,render:function(e){return t?Object(r.jsx)(p.a,{to:"/private"}):t?void 0:Object(r.jsx)(a,Object(b.a)({},e))}})}));var X=y((function(e){var t=e.isLoggedIn,n=e.isLoading,a=e.component,s=e.exact,o=e.path;return n?"Loading":Object(r.jsx)(p.b,{exact:s,path:o,render:function(e){return t?t?Object(r.jsx)(a,Object(b.a)({},e)):void 0:Object(r.jsx)(p.a,{to:"/login"})}})})),Z=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(w,{}),Object(r.jsxs)(p.d,{children:[Object(r.jsx)(p.b,{exact:!0,path:"/",component:B}),Object(r.jsx)(X,{exact:!0,path:"/records/add",component:Y}),Object(r.jsx)(p.b,{exact:!0,path:"/records/:id",component:J}),Object(r.jsx)(V,{exact:!0,path:"/signup",component:G}),Object(r.jsx)(V,{exact:!0,path:"/login",component:T}),Object(r.jsx)(X,{exact:!0,path:"/private",component:D}),Object(r.jsx)(X,{exact:!0,path:"/records/edit/:id",component:Q})]})]})}}]),n}(s.Component);n(80);i.a.render(Object(r.jsx)(l.a,{children:Object(r.jsx)(C,{children:Object(r.jsx)(Z,{})})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.feb79170.chunk.js.map